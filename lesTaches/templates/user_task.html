{% extends "baseLayout.html" %}
{% load static %}
    {% block title %}Le(s) tâche(s) de {{user.email}}{% endblock %}
    {% block styles %}
        {{ block.super }}
        <link rel="stylesheet" href="{% static 'node_modules/@fortawesome/fontawesome-free/css/all.css' %}">
    {% endblock %}
    {% block content %}
{% if tasks %}
<h1>Liste des tâches de {{user.email}}</h1>
    <div class="row_entete">
        <div class="col">
            <h4>Nom</h4>
        </div>
        <div class="col">
            <h4>Date de création</h4>
        </div>
        <div class="col">
            <h4>Date d'échéance</h4>
        </div>
        <div class="col">
            <h4>Tâche fermée</h4>
        </div>
        <div class="col">
            <h4>Modifier</h4>
        </div>
        <div class="col">
            <h4>Supprimer</h4>
        </div>
    </div>
    {% for task in tasks %}
    <div class="row">
        <a class="col" href="/lesTaches/detail/{{ task.id }}/ ">{{ task.name }}</a>
        <a class="col" href="/lesTaches/detail/{{ task.id }}/ ">{{ task.creation_date }}</a>
        <a class="col" href="/lesTaches/detail/{{ task.id }}/ ">{{ task.colored_due_date }}</a>
        {% if task.closed %}
            <a class="col" href="/lesTaches/detail/{{ task.id }}/ "><i class="fas fa-lock"></i></a>
        {% else %}
            <a class="col" href="/lesTaches/detail/{{ task.id }}/ "><i class="fas fa-lock-open"></i></a>
        {% endif%}
        <a class="col" href="/lesTaches/EditTask/{{task.id}}/"><button type="button" class="btn btn-secondary">Modifier</button></a>
        <!-- Button trigger modal -->
        <a href="#" class="col"><button type="button" class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#exampleModal{{task.id}}">Supprimer</button></a>
        <!-- Modal -->
        <div class="modal fade" id="exampleModal{{task.id}}" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
          <div class="modal-dialog">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">Modal title</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
              </div>
              <div class="modal-body">
                Êtes-vous sur de vouloir supprimer {{task.name}}
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                  <a href="/lesTaches/DeleteTask/{{task.id}}/"><button type="button" class="btn btn-danger">Supprimer</button></a>
              </div>
            </div>
          </div>
        </div>
    </div>
    {% endfor %}
{% else %}
    <h1>Aucunes tâches est attribuées à {{user.email}}</h1>
{% endif %}
        <a href="/lesTaches/addTask/"><button type="button" class="btn btn-primary">Ajouter</button></a>
    {% endblock %}